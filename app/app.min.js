angular.module("Roadmap",[]),angular.module("Roadmap").controller("MainController",["$scope","apiService","$timeout",function(a,b,c){a.init=function(b){console.warn(b),a.lists=b},a.createTask=function(c,d,e){b.createTask(c,d).then(function(b){a.newTask="",a.lists[e].tasks.push(b.data)})["catch"](function(a){console.error(a)})},a.createList=function(c){b.createList(c).then(function(b){a.lists.push(b.data)})["catch"](function(a){console.error(a)})},a.enableNewList=function(){a.newListEnabled=!0,c(function(){$("#new-list").focus()})},a.activateTask=function(b){a.modalOpen=!0,b.start=new Date(b.start),b.end=new Date(b.end),a.active=b},a.closeModal=function(){a.modalOpen=!1},a.updateActive=function(a){b.updateActive(a).then(function(a){alertify.success("Date updated")})["catch"](function(a){console.error(a),alertify.error("Ooops! There was an error.")})}}]),angular.module("Roadmap").factory("apiService",["$http",function(a){var b={};return b.createTask=function(b,c){var d={list_id:c,title:b};return a.post("/api/task",d)},b.createList=function(b){return a.post("/api/list",{title:b})},b.updateActive=function(b){return a.put("/api/task/"+b._id,b)},b}]),angular.module("Roadmap").directive("timeline",[function(){return{restrict:"A",scope:{lists:"="},link:function(a,b,c){var d=[];a.lists.forEach(function(a){a.tasks.forEach(function(a){if(a.start)return d.push(a)})}),console.log(d);var e=document.getElementById("visualization"),f=new vis.DataSet(d),g={};new vis.Timeline(e,f,g)}}}]);